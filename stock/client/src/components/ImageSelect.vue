<template>
  <o-upload v-model="image" drag-drop accept="image/png, image/jpeg" :variant="props.variant" statusIcon>
    <div class="card">
      <div class="card-image">
        <figure class="image is-96x96">
          <img v-if="imageurl" :src="imageurl" @error="imageurl=''">
          <o-icon v-else icon="image" size="large" style="width:100%; height:100%" ></o-icon>
        </figure>
      </div>
    </div>
  </o-upload>
</template>
<script setup lang="ts">
import { ref, defineEmits, computed, withDefaults } from 'vue';

const emit = defineEmits<{(e: 'update:modelValue', v: File|null): void}>()
const props=withDefaults(defineProps<{
  modelValue: File|null,
  defaultImage?:string,
  variant?:string
}>(),{
  defaultImage:"",
  variant:""
})
const imageurl = ref<string>(props.defaultImage)

const image = computed({
  get: () => props.modelValue,
  set: (value) => {
    imageurl.value=window.URL.createObjectURL(value as Blob)
    emit('update:modelValue', value);
  },
});
</script>